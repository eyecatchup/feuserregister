
# Common configuration
plugin.tx_feuserregister_mvc1.configurations {
  templatePath = EXT:feuserregister/templates/
  pathToTemplateDirectory = EXT:feuserregister/templates/
}

includeLibs.tx_div = EXT:div/class.tx_div.php
includeLibs.tx_lib_switch = EXT:lib/class.tx_lib_switch.php
includeLibs.tx_feuserregister_controller_frontenduserregistration = EXT:feuserregister/controllers/class.tx_feuserregister_controller_frontenduserregistration.php

# The controller switch
plugin.tx_feuserregister.controllerSwitch = USER
plugin.tx_feuserregister.controllerSwitch {
    userFunc = tx_lib_switch->main

    frontenduserregistration_edit = USER
    frontenduserregistration_edit {
       userFunc = tx_feuserregister_controller_frontenduserregistration->main
       setupPath = plugin.tx_feuserregister_mvc1.configurations.
       defaultAction = edit
       templatePath = EXT:feuserregister/templates/
       pathToTemplateDirectory = EXT:feuserregister/templates/
       
       config {
        validationStyles.file = typo3conf/ext/feuserregister/lib/validation/style.css
       	entryClassName = tx_feuserregister_model_fe_user
            fields {
              username {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
        	      error.wrap = <span class="error">|</span>
              }
              password {
				  type=password
		          validate.secondInputField = 1
		          validate.notOneOf = 1234567, 0123456, abcdefg, ABCDEFG, password, PASSWORD, passwort, PASSWORT
		          validate.err_message = Das Passwort muss mindestens 7 Zeichen enthalten und darf nicht abcdefg oder passwort sein.
		          validate.err_confirm_message = password_confirm_err
				  label.wrap = <dt><label for="feuserregister_password">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  validate_label.wrap = <dt><label for="feuserregister_password_validate">|</label></dt>
				  validate_input.wrap = <dd>|</dd>
				  validate_all.wrap = |
        	      error.wrap = <span class="error">|</span>
              }
              usergroup {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              }
              first_name {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
        	      validate.validationMethod = validateRequired
              }
              email {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
        	      validate.validationMethods = validate-email
        	      validate.secondInputField = 1
				  validate_label.wrap = <dt><label for="feuserregister_email_validate">|</label></dt>
				  validate_input.wrap = <dd>|</dd>
				  validate_all.wrap = |
              }
              by_invitation {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              }
              gender {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              }
              status {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              }
              last_name {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              }
              module_sys_dmail_category {
	              type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
              	
              }
            }
            seperate_label_markers = 1
            preview = 1
            preview {
            	fields {
            		username {
            			label.wrap = <span class="labelboldwrap">|: </span>
            		}
            	}
            }
            message = <div id="feuserregister_stepmessage">%%%stepmessage2%%%</div>

       }
       pid = 24
    
    }

	
    frontenduserregistration = USER
    frontenduserregistration {
       userFunc = tx_feuserregister_controller_frontenduserregistration->main
       setupPath = plugin.tx_feuserregister_mvc1.configurations.
       defaultAction = create
       templatePath = EXT:feuserregister/templates/
       pathToTemplateDirectory = EXT:feuserregister/templates/
       
       config {
       entryClassName = tx_feuserregister_model_fe_user
#######################
##
## registerProcessType:
## registration without requirement: 1
## registration with    requirement: admin confirmation: 2
## registration with    requirement: user confirmation: 3
## registration with    requirement: admin & user confirmation: 4
##
##
#######################
       	registerProcessType = 1
       	unregisterProcessType = 1
       	useJSValidation = 2
       	confirmation.pid = 59
       	confirmation.email {
       		afterAdminConfirmation {
       		
       		}
       		afterUserConfirmation {
       		
       		}
       		afterAllConfirmation {
       		
       		}
       		confirmationResendRequest {
       			user {
		       		templatePath = EXT:feuserregister/templates/
		       		templateNameHtml = feuserregister_confirmresend_mail_user_html
		       		templateNameText = feuserregister_confirmresend_mail_user_text
			       	recipient = fields.email
			        recipient_copy = dev@cross-content.com 
			        replyto_email = team@cross-content.com 
			        replyto_name = Mr. Reply  
			        subject = Administration Email User registered
			        from_email = sebastian@boettger.org
			        from_name = FE User Register  
			        returnPath = 
			    }
       		}
       	}
       	special {
       		fields.username = fields.email
       	}
       	## If you want the username to be the emailaddress remove the following line
       	special >
       	additionalMarker {
       		marker1 = %%%MARKER1%%%
       		marker2 = %%%MARKER2%%%
       	}
        steps {
          1 {
            fields {
              # the id of the input fields are like this: feuserregister_username
              username {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required,validate-unique
			  }
              usergroup {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required
              }
              usergroup >
              by_invitation {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required
              }
              gender {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = validate-selection
              }
              status {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required
              }
              status >
              last_name {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
              }
              www {
				  type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required, validate-url,validate-unique
              }
              address {
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
              }
              module_sys_dmail_category {
	              type=text
				  label.wrap = <dt><label for="">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required
              	
              }
              module_sys_dmail_category >
            }
            seperate_label_markers = 0
            preview = 1
            preview {
            	fields {
            		username {
            			label.wrap = <span class="labelboldwrap">|: </span>
            		}
            	}
            }
          }
          2 {
            message = <div id="feuserregister_stepmessage">%%%stepmessage2%%%</div>
            seperate_label_markers = 1
            fields {
              password.type=password
			  password {
				  label.wrap = <dt><label for="feuserregister_password">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
				  validate_label.wrap = <dt><label for="feuserregister_password_validate">|</label></dt>
				  validate_input.wrap = <dd>|</dd>
				  validate_all.wrap = |
				  validate_error.wrap = <span class="error">|</span>              
	              validate.err_message = password_err
	              validate.err_confirm_message = password_confirm_err
			  }
              password.validate.secondInputField = 1
              password.validate {
              	minlen = 7
              }
              password.validate.validationMethod = required,validateEquals
#              password.additionalClasses = validate-feuserregister_password
              email.type=text
			  email {
				  label.wrap = <dt><label for="feuserregister_email">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
				  validate_label.wrap = <dt><label for="feuserregister_email_validate">|</label></dt>
				  validate_input.wrap = <dd>|</dd>
				  validate_all.wrap = |
				  validate_error.wrap = <span class="error">|</span>              
				  validate.err_message = my_email_err
				  validate.err_confirm_message = my_email_confirm_err
			  }
              email.validate.secondInputField = 1
              email.validate.validationMethod = required,validateEquals,validate-email
              email.validate {
              	minlen = 7
              }
              first_name {
				  type=text
				  label.wrap = <dt><label for="feuserregister_first_name">|</label></dt>
				  input.wrap = <dd>|</dd>
				  all.wrap = |
				  error.wrap = <span class="error">|</span>              
        	      validate.validationMethod = required,validate-minlen,validate-maxlen
        	      validate.validate-maxlen = 7
        	      validate.validate-minlen = 2
        	      validate.err_message = first_name_err
              }
            }
          }
        }
       useSingleTemplate = 1
       pid = 24
       preview = 0
       email {
       	admin {
       		templatePath = EXT:feuserregister/templates/
       		templateNameHtml = feuserregister_mail_admin_html
       		templateNameText = feuserregister_mail_admin_text
	       	recipient = sboettger@cross-content.com
#	        recipient_copy = dev@cross-content.com 
	        replyto_email = team@cross-content.com 
	        replyto_name = Mr. Reply  
	        subject = Administration Email User registered
	        from_email = sebastian@boettger.org
	        from_name = FE User Register  
	        returnPath = 
#	        plainText = Dies ist Text Plain
#	        htmlText = <html><body>Hallo <b>HTML</b> Welt</body></html>
       	}
       	user {
       		additionalMarker = confirm_message_top,confirm_message_bottom
       		templatePath = EXT:feuserregister/templates/
       		templateNameHtml = feuserregister_mail_user_html
       		templateNameText = feuserregister_mail_user_text
	       	recipient = fields.email
	        recipient_copy = dev@cross-content.com 
	        replyto_email = team@cross-content.com 
	        replyto_name = Mr. Reply  
	        subject = Confirmation Request Email User 
	        from_email = sebastian@boettger.org
	        from_name = FE User Register Confirmation agent
	        returnPath = 
#	        plainText = Dies ist Text Plain
#	        htmlText = <html><body>Hallo <b>HTML</b> Welt</body></html>
       	}
       }

      }
     }
     
     frontenduserregistration_send_confirmmsg_again = USER
     frontenduserregistration_send_confirmmsg_again {
       userFunc = tx_feuserregister_controller_frontenduserregistration->main
       setupPath = plugin.tx_feuserregister_mvc1.configurations.
       defaultAction = confirmMessageRequest
       templatePath = EXT:feuserregister/templates/
       pathToTemplateDirectory = EXT:feuserregister/templates/
       
       config {
       	confirmation.email {
       		confirmationResendRequest {
       			user {
		       		templatePath = EXT:feuserregister/templates/
		       		templateNameHtml = feuserregister_confirmresend_mail_user_html
		       		templateNameText = feuserregister_confirmresend_mail_user_text
			       	recipient = fields.email
			        recipient_copy = dev@cross-content.com 
			        replyto_email = team@cross-content.com 
			        replyto_name = Mr. Reply  
			        subject = Administration Email User registered
			        from_email = sebastian@boettger.org
			        from_name = FE User Register  
			        returnPath = 
			    }
       		}
	   }
	 }
    }
}
tt_content.list.20.feuserregister_mvc1 =< plugin.tx_feuserregister.controllerSwitch

plugin.tx_feuserregister._LOCAL_LANG.default.password_validate_label = Passwort wiederholen
plugin.tx_feuserregister._LOCAL_LANG.default.email_validate_label = Email wiederholen
plugin.tx_feuserregister._LOCAL_LANG.default.password_confirm_err = Die beiden Passwörter haben nicht überein gestimmt.
plugin.tx_feuserregister._LOCAL_LANG.default.password_err = Das Passwort muss mindestens 7 Zeichen enthalten und darf nicht abcdefg oder passwort sein.
plugin.tx_feuserregister._LOCAL_LANG.default.first_name_err = Der Vorname muss aus mindestens 2 und max 7 Zeichen bestehen.
plugin.tx_feuserregister._LOCAL_LANG.default.my_email_err = Bitte geben sie eine korrekte Emailadresse an.
plugin.tx_feuserregister._LOCAL_LANG.default.my_email_confirm_err = Die Emailadressen haben nicht übereingestimmt.


plugin.tx_feuserregister._LOCAL_LANG.default.gender = Geschlecht
plugin.tx_feuserregister._LOCAL_LANG.default.www = Webseiten-URL
plugin.tx_feuserregister._LOCAL_LANG.default.fe_users_gender_I_0 = männlich
plugin.tx_feuserregister._LOCAL_LANG.default.fe_users_gender_I_1 = weiblich
plugin.tx_feuserregister._LOCAL_LANG.default.address = Adresse
plugin.tx_feuserregister._LOCAL_LANG.default.SAVE_LABEL_EDIT = Abspeichern
plugin.tx_feuserregister._LOCAL_LANG.default.SAVE_LABEL_STEP_1 = Weiter
plugin.tx_feuserregister._LOCAL_LANG.default.SAVE_LABEL_STEP_2 = Registrierung abschliessen
